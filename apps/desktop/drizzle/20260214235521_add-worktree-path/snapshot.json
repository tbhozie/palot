{
	"version": "7",
	"dialect": "sqlite",
	"id": "aaa44630-ae03-409b-a1e3-51484aa942cf",
	"prevIds": ["cf985943-4b81-44f7-8302-c6dd90398b78"],
	"ddl": [
		{
			"name": "automation_runs",
			"entityType": "tables"
		},
		{
			"name": "automations",
			"entityType": "tables"
		},
		{
			"type": "text",
			"notNull": false,
			"autoincrement": false,
			"default": null,
			"generated": null,
			"name": "id",
			"entityType": "columns",
			"table": "automation_runs"
		},
		{
			"type": "text",
			"notNull": true,
			"autoincrement": false,
			"default": null,
			"generated": null,
			"name": "automation_id",
			"entityType": "columns",
			"table": "automation_runs"
		},
		{
			"type": "text",
			"notNull": true,
			"autoincrement": false,
			"default": null,
			"generated": null,
			"name": "workspace",
			"entityType": "columns",
			"table": "automation_runs"
		},
		{
			"type": "text",
			"notNull": true,
			"autoincrement": false,
			"default": null,
			"generated": null,
			"name": "status",
			"entityType": "columns",
			"table": "automation_runs"
		},
		{
			"type": "integer",
			"notNull": true,
			"autoincrement": false,
			"default": "1",
			"generated": null,
			"name": "attempt",
			"entityType": "columns",
			"table": "automation_runs"
		},
		{
			"type": "text",
			"notNull": false,
			"autoincrement": false,
			"default": null,
			"generated": null,
			"name": "session_id",
			"entityType": "columns",
			"table": "automation_runs"
		},
		{
			"type": "text",
			"notNull": false,
			"autoincrement": false,
			"default": null,
			"generated": null,
			"name": "worktree_path",
			"entityType": "columns",
			"table": "automation_runs"
		},
		{
			"type": "integer",
			"notNull": false,
			"autoincrement": false,
			"default": null,
			"generated": null,
			"name": "started_at",
			"entityType": "columns",
			"table": "automation_runs"
		},
		{
			"type": "integer",
			"notNull": false,
			"autoincrement": false,
			"default": null,
			"generated": null,
			"name": "completed_at",
			"entityType": "columns",
			"table": "automation_runs"
		},
		{
			"type": "integer",
			"notNull": false,
			"autoincrement": false,
			"default": null,
			"generated": null,
			"name": "timeout_at",
			"entityType": "columns",
			"table": "automation_runs"
		},
		{
			"type": "text",
			"notNull": false,
			"autoincrement": false,
			"default": null,
			"generated": null,
			"name": "result_title",
			"entityType": "columns",
			"table": "automation_runs"
		},
		{
			"type": "text",
			"notNull": false,
			"autoincrement": false,
			"default": null,
			"generated": null,
			"name": "result_summary",
			"entityType": "columns",
			"table": "automation_runs"
		},
		{
			"type": "integer",
			"notNull": false,
			"autoincrement": false,
			"default": null,
			"generated": null,
			"name": "result_has_actionable",
			"entityType": "columns",
			"table": "automation_runs"
		},
		{
			"type": "text",
			"notNull": false,
			"autoincrement": false,
			"default": null,
			"generated": null,
			"name": "result_branch",
			"entityType": "columns",
			"table": "automation_runs"
		},
		{
			"type": "text",
			"notNull": false,
			"autoincrement": false,
			"default": null,
			"generated": null,
			"name": "result_pr_url",
			"entityType": "columns",
			"table": "automation_runs"
		},
		{
			"type": "text",
			"notNull": false,
			"autoincrement": false,
			"default": null,
			"generated": null,
			"name": "error_message",
			"entityType": "columns",
			"table": "automation_runs"
		},
		{
			"type": "text",
			"notNull": false,
			"autoincrement": false,
			"default": null,
			"generated": null,
			"name": "archived_reason",
			"entityType": "columns",
			"table": "automation_runs"
		},
		{
			"type": "text",
			"notNull": false,
			"autoincrement": false,
			"default": null,
			"generated": null,
			"name": "archived_assistant_message",
			"entityType": "columns",
			"table": "automation_runs"
		},
		{
			"type": "integer",
			"notNull": false,
			"autoincrement": false,
			"default": null,
			"generated": null,
			"name": "read_at",
			"entityType": "columns",
			"table": "automation_runs"
		},
		{
			"type": "integer",
			"notNull": true,
			"autoincrement": false,
			"default": null,
			"generated": null,
			"name": "created_at",
			"entityType": "columns",
			"table": "automation_runs"
		},
		{
			"type": "integer",
			"notNull": true,
			"autoincrement": false,
			"default": null,
			"generated": null,
			"name": "updated_at",
			"entityType": "columns",
			"table": "automation_runs"
		},
		{
			"type": "text",
			"notNull": false,
			"autoincrement": false,
			"default": null,
			"generated": null,
			"name": "id",
			"entityType": "columns",
			"table": "automations"
		},
		{
			"type": "integer",
			"notNull": false,
			"autoincrement": false,
			"default": null,
			"generated": null,
			"name": "next_run_at",
			"entityType": "columns",
			"table": "automations"
		},
		{
			"type": "integer",
			"notNull": false,
			"autoincrement": false,
			"default": null,
			"generated": null,
			"name": "last_run_at",
			"entityType": "columns",
			"table": "automations"
		},
		{
			"type": "integer",
			"notNull": true,
			"autoincrement": false,
			"default": "0",
			"generated": null,
			"name": "run_count",
			"entityType": "columns",
			"table": "automations"
		},
		{
			"type": "integer",
			"notNull": true,
			"autoincrement": false,
			"default": "0",
			"generated": null,
			"name": "consecutive_failures",
			"entityType": "columns",
			"table": "automations"
		},
		{
			"type": "integer",
			"notNull": true,
			"autoincrement": false,
			"default": null,
			"generated": null,
			"name": "created_at",
			"entityType": "columns",
			"table": "automations"
		},
		{
			"type": "integer",
			"notNull": true,
			"autoincrement": false,
			"default": null,
			"generated": null,
			"name": "updated_at",
			"entityType": "columns",
			"table": "automations"
		},
		{
			"columns": ["automation_id"],
			"tableTo": "automations",
			"columnsTo": ["id"],
			"onUpdate": "NO ACTION",
			"onDelete": "CASCADE",
			"nameExplicit": false,
			"name": "fk_automation_runs_automation_id_automations_id_fk",
			"entityType": "fks",
			"table": "automation_runs"
		},
		{
			"columns": ["id"],
			"nameExplicit": false,
			"name": "automation_runs_pk",
			"table": "automation_runs",
			"entityType": "pks"
		},
		{
			"columns": ["id"],
			"nameExplicit": false,
			"name": "automations_pk",
			"table": "automations",
			"entityType": "pks"
		},
		{
			"columns": [
				{
					"value": "automation_id",
					"isExpression": false
				}
			],
			"isUnique": false,
			"where": null,
			"origin": "manual",
			"name": "idx_runs_automation",
			"entityType": "indexes",
			"table": "automation_runs"
		},
		{
			"columns": [
				{
					"value": "status",
					"isExpression": false
				}
			],
			"isUnique": false,
			"where": null,
			"origin": "manual",
			"name": "idx_runs_status",
			"entityType": "indexes",
			"table": "automation_runs"
		},
		{
			"columns": [
				{
					"value": "created_at",
					"isExpression": false
				}
			],
			"isUnique": false,
			"where": null,
			"origin": "manual",
			"name": "idx_runs_created",
			"entityType": "indexes",
			"table": "automation_runs"
		}
	],
	"renames": []
}
